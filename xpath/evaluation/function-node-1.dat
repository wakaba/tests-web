#data
last()
#result
1

#data
position()
#result
1

#xml 1
<p>aaa</p>

#data
//child::node()[last() = 1]
#result 1
#result 1 /1

#data
//child::node()[last() = 2]
#result 1
/1
/1/1

#data
//child::node()[position() = 1]
#result 1
/1

#xml 2
<p><q/><q/><q/></p>

#data
//node()[last () = 4]
#result 2
/1
/1/1
/1/2
/1/3

#data
//node()[position () = 1]
#result 2
/1

#data
//node()[position () = 2]
#result 2
/1/1

#data
//node()[position () = 3]
#result 2
/1/2

#data
//node()[position() > 2][position() = 1]
#result 2
/1/2

#data
//node()[position() > 2][position() = 2]
#result 2
/1/3

#data
//node()[position() > 2][position() = 2][position()=1]
#result 2
/1/3

#data
//node()[position() > 2][position() = 2][position()=0]
#result 2

#data
//node()[position() > 2][position() = 2][position()=2]
#result 2

#data
//node()[position() > 2][position() = 2][position()=1.5]
#result 2

#data
//node()[position() > 2][position() = 2][position()=1][last() = 1]
#result 2
/1/3

#xml 3
<p>aaa<q>bee<r>ra<s>ww</s></r></q></p>

#data
//ancestor::node()[position () = 1]
#result 3 /1/2/2/2/1
/1/2/2/2

#data
//ancestor::node()[position () = 4]
#result 3 /1/2/2/2/1
/1

#data
//ancestor::node()[position () = 5]
#result 3 /1/2/2/2/1
/

#data
//ancestor::node()[position () = 6]
#result 3 /1/2/2/2/1

#data
//ancestor::node()[last () = 5]
#result 3 /1/2/2/2/1
/1/2/2/2
/1/2/2
/1/2
/1
/

#data
//ancestor::node()[position() > 2.5]
#result 3 /1/2/2/2/1
/1/2
/1
/

#data
//ancestor::node()[position() > 2.5][position () > 1]
#result 3 /1/2/2/2/1
/1
/

#data
(//ancestor::node())[position() > 2.5]
#result 3 /1/2/2/2/1
/1/2
/1/2/2
/1/2/2/2

#data
count(/)
#result 3
1

#data
count(/ | /child::*)
#result 3
2

#data
count(//q)
#result 2
3
#result 3
1

#data
count("aa")
#result
null
#errors
m;xpath:incompat with node-set;string

#data
count(132.3)
#result
null
#errors
m;xpath:incompat with node-set;number

#data
count(53 = 42)
#result
null
#errors
m;xpath:incompat with node-set;boolean

#xml 4
<p id="33">a<q id="aa  b"><r id="">a</r></q><p id="33"></p><br id="aa"/><br id="b"/></p><!---->

#data
id(33)
#result 4 /
/1
#result 4 /1
/1
#result 4 /1/1
/1
#result 4 /2
/1

#data 
id("aa  b")
#result 4
/1/4
/1/5

#data escaped
id("aa  b\u0009\u000D\u000A")
#result 4
/1/4
/1/5

#data
id("")
#result 4 /
#result 4 /1

#xml 5
<p>aww <br id="ffoo"/><br id="ffoo"/></p>

#data
id("ffoo")
#result 5
/1/2

#xml 6
<p><i>hoge</i><b id="ha"/><i>fuga</i><b id="fuga"/><b id="hoge"/></p>

#data
id(//i)
#result 6
/1/4
/1/5

#data
id(/)
#result 6

#data
id(/foo)
#result 3
#result 4
#result 5
#result 6

#xml 7 escaped
<p><i>hoge \u0009fuga</i><b id="ha"/><i2>fuga</i2><b id="fuga"/><b id="hoge"/></p>

#data
id(//i)
#result 7
/1/4
/1/5

#data
id(//i)/@id
#result 7
/1/4/@id
/1/5/@id

#data
id(//i)[position () = 2]
#result 7
/1/5

#data
id(//i)[last () = 2]
#result 7
/1/4
/1/5

#xml 8
<!DOCTYPE hoge><x abc="de"><y:w xmlns:y="http://y/"
y:foo="">hoge<!--foo--><?aa be?></y:w></x>

#data
local-name (/)
#result 8
""

#data
namespace-uri(/)
#result 8
""

#data
name(/)
#result 8
""

#data
local-name (/node()[1])
#result 8
""

#data
namespace-uri(/node()[1])
#result 8
""

#data
name(/node()[1])
#result 8
""

#data
local-name (/*)
#result 8
"x"

#data
namespace-uri(/*)
#result 8
""

#data
name(/*)
#result 8
"x"

#data
local-name (/*/*)
#result 8
"w"

#data
namespace-uri(/*/*)
#result 8
"http://y/"

#data
name(/*/*)
#result 8
"y:w"

#data
local-name (/*/@*)
#result 8
"abc"

#data
namespace-uri(/*/@*)
#result 8
""

#data
name(/*/@*)
#result 8
"abc"

#data
local-name (/*/*/@*)
#result 8
"foo"

#data
namespace-uri(/*/*/@*)
#result 8
"http://y/"

#data
name(/*/*/@*)
#result 8
"y:foo"

#data
local-name (/*/*/text())
#result 8
""

#data
namespace-uri(/*/*/text())
#result 8
""

#data
name(/*/*/text())
#result 8
""

#data
local-name (/*/*/comment())
#result 8
""

#data
namespace-uri(/*/*/comment())
#result 8
""

#data
name(/*/*/comment())
#result 8
""

#data
local-name (/*/*/processing-instruction())
#result 8
"aa"

#data
namespace-uri(/*/*/processing-instruction())
#result 8
""

#data
name(/*/*/processing-instruction())
#result 8
"aa"

#data
local-name (/hoge)
#result 8
""

#data
namespace-uri(/hoge)
#result 8
""

#data
name(/hoge)
#result 8
""

#data
local-name ()
#result 8
""
#result 8 /2
"x"
#result 8 /2/1
"w"

#data
namespace-uri()
#result 8
""
#result 8 /2
""
#result 8 /2/1
"http://y/"

#data
name()
#result 8
""
#result 8 /2
"x"
#result 8 /2/1
"y:w"

#data
local-name (//x | //y)
#result 8
"x"

#data
namespace-uri(/x | //y)
#result 8
""

#data
name(/x | //y)
#result 8
"x"

#data
local-name ("abc")
#result
null
#errors
m;xpath:incompat with node-set;string

#data
namespace-uri("abc")
#result
null
#errors
m;xpath:incompat with node-set;string

#data
name("abc")
#result
null
#errors
m;xpath:incompat with node-set;string

#data
local-name (12)
#result
null
#errors
m;xpath:incompat with node-set;number

#data
namespace-uri(12)
#result
null
#errors
m;xpath:incompat with node-set;number

#data
name(12)
#result
null
#errors
m;xpath:incompat with node-set;number

#data
local-name (1=2)
#result
null
#errors
m;xpath:incompat with node-set;boolean

#data
namespace-uri(1=2)
#result
null
#errors
m;xpath:incompat with node-set;boolean

#data
name(1=2)
#result
null
#errors
m;xpath:incompat with node-set;boolean
